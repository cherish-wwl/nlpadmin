webpackJsonp([3],{"+SKV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("4YfN"),i=a.n(o),r=a("vLgD");var n=a("p512"),l=a("9rMa"),s={computed:i()({},Object(l.b)(["dictList"])),data:function(){return{searchKey:null,loading:!1,tableData:null,currentPage:1,pageSize:5,totalNumber:0,mode:"add",dialogFormVisible:!1,form:{academyId:"",academyName:"",acceptTime:"",forwardType:"",solutionDesc:"",solutionIcon:"",solutionId:"",solutionName:"",solutionUrl:""},initForm:{academyId:"",academyName:"",acceptTime:"",forwardType:"",solutionDesc:"",solutionIcon:"",solutionId:"",solutionName:"",solutionUrl:""},formData:[{name:"标题",prop:"solutionName",rules:{required:!0,message:"标题不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"描述",prop:"solutionDesc",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"图片",prop:"solutionIcon",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"机构名称",prop:"academyId",labelWidth:"180px",isInput:!1,isTextarea:!1,isSelect:!0,isDict:!1,isAcademy:!0},{name:"访问路径",prop:"solutionUrl",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"跳转方式",prop:"forwardType",labelWidth:"180px",isDict:!0,isAcademy:!1,parentCode:"011",isInput:!1,isTextarea:!1,isSelect:!0},{name:"接入时间",prop:"acceptTime",labelWidth:"180px",isInput:!0,isTextarea:!1}],academyList:""}},methods:{transferforwardType:function(e){if(!e.forwardType)return"";for(var t=0;t<this.dictList.length;t++)if(this.dictList[t].dictCode==e.forwardType)return this.dictList[t].dictName;return""},querySearch:function(){console.log("===================查询关键字======================"),console.log(this.searchKey),this.loadingTableData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.currentPage=1,this.loadingTableData()},handleCurrentChange:function(e){console.log("当前页: "+e),console.log("当前页: "+this.currentPage),this.currentPage=e,this.loadingTableData()},deleteRowData:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a={solutionId:e.solutionId},Object(r.a)({url:"/solution/delSolution",method:"post",params:a})).then(function(e){t.loadingTableData(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},editRowData:function(e,t){console.log(t),this.form=t,this.mode=e,this.dialogFormVisible=!0},addRowData:function(e){console.log("addTradesRowData"),this.mode=e,this.form=this.initForm,this.dialogFormVisible=!0},loadingTableData:function(){var e,t=this;(e={pageNow:this.currentPage,pageSize:this.pageSize,keyword:this.searchKey},Object(r.a)({url:"/solution/list",method:"post",params:e})).then(function(e){t.tableData=e.data,t.totalNumber=e.total})},closeDialog:function(){this.dialogFormVisible=!1,this.$refs.ruleForm.resetFields()},submitForm:function(e){var t=this;console.log(this.form),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a;"add"==t.mode?(a=t.form,Object(r.a)({url:"/solution/addSolution",method:"post",data:a})).then(function(e){t.loadingTableData(),t.closeDialog(),t.$message({message:"保存成功！",type:"success"})}):function(e){return Object(r.a)({url:"/solution/updateSolution",method:"post",params:e})}(t.form).then(function(e){t.loadingTableData(),t.closeDialog(),t.$message({message:"保存成功！",type:"success"})})})}},mounted:function(){var e=this;this.loadingTableData(),Object(n.i)().then(function(t){e.academyList=t.data})}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-content"},[a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},on:{change:e.querySearch},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.querySearch(t)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addRowData("add")}}},[e._v("添加")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"solutionId",label:"序号",type:"index",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"solutionName",label:"标题","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"solutionDesc",label:"描述","min-width":"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"solutionIcon",label:"图片","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"academyName",label:"机构名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"forwardType",label:"跳转方式","min-width":"150",formatter:e.transferforwardType}}),e._v(" "),a("el-table-column",{attrs:{prop:"acceptTime",label:"接入时间","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"solutionUrl",label:"访问路径","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRowData(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editRowData("edit",t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"add"==e.mode?"添加":"机构",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form}},e._l(e.formData,function(t,o){return a("el-form-item",{key:o,attrs:{label:t.name+":","label-width":t.labelWidth,prop:t.prop,rules:t.rules}},[t.isInput?a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):e._e(),e._v(" "),t.isTextarea?a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},rows:2,"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):e._e(),e._v(" "),t.isSelect?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}},[e._l(e.academyList,function(o){return t.isAcademy?a("el-option",{key:o.id,attrs:{label:o.academyName,value:o.id}}):e._e()}),e._v(" "),t.isDict?e._l(e.dictList,function(o){return o.parentCode==t.parentCode?a("el-option",{key:o.dictCode,attrs:{label:o.dictName,value:o.dictCode}}):e._e()}):e._e()],2):e._e()],1)})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("/Xao")(s,c,!1,function(e){a("lltS")},"data-v-febc2c70",null);t.default=u.exports},ZeNh:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.el-pagination[data-v-febc2c70]{\n  text-align: right;\n}\n.el-input[data-v-febc2c70] {\n  width: 180px;\n}\n",""])},lltS:function(e,t,a){var o=a("ZeNh");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("8bSs")("2b82fedc",o,!0)},p512:function(e,t,a){"use strict";t.i=function(){return Object(o.a)({url:"/academy/list",method:"post"})},t.g=function(e){return Object(o.a)({url:"/academy/grouplist",method:"post",params:e})},t.h=function(e){return Object(o.a)({url:"/academy/professorlist",method:"post",params:e})},t.a=function(e){return Object(o.a)({url:"/academy/addAcademy",method:"post",params:e})},t.j=function(e){return Object(o.a)({url:"/academy/updateAcademy",method:"post",data:e})},t.d=function(e){return Object(o.a)({url:"/academy/delAcademy",method:"post",params:e})},t.b=function(e){return Object(o.a)({url:"/academy/addGroup",method:"post",params:e})},t.k=function(e){return Object(o.a)({url:"/academy/updateGroup",method:"post",data:e})},t.e=function(e){return Object(o.a)({url:"/academy/delGroup",method:"post",params:e})},t.c=function(e){return Object(o.a)({url:"/academy/addProfessor",method:"post",params:e})},t.l=function(e){return Object(o.a)({url:"/academy/updateProfessor",method:"post",data:e})},t.f=function(e){return Object(o.a)({url:"/academy/delProfessor",method:"post",params:e})};var o=a("vLgD")}});