webpackJsonp([1],{FiPm:function(e,t,r){var a=r("S/LG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("e9514700",a,!0)},HZZI:function(e,t,r){"use strict";t.c=function(e){return Object(a.a)({url:"/entry/serverport/list",method:"post",params:e})},t.d=function(e){return Object(a.a)({url:"/entry/serverport/update",method:"post",params:e})},t.b=function(e){return Object(a.a)({url:"entry/server/delServer",method:"post",params:e})},t.a=function(e){return Object(a.a)({url:"/entry/serverport/toadd",method:"post",params:e})};var a=r("vLgD")},OVQD:function(e,t,r){"use strict";t.d=function(e){return Object(a.a)({url:"/classify/typeList",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/classify/typeAdd",method:"post",params:e})},t.c=function(e){return Object(a.a)({url:"/classify/typeUpdate",method:"post",params:e})},t.b=function(e){return Object(a.a)({url:"/classify/typeDel",method:"post",params:e})},t.e=function(e){return Object(a.a)({url:"/classify/serviceList",method:"post",params:e})};var a=r("vLgD")},"S/LG":function(e,t,r){(e.exports=r("BkJT")(!1)).push([e.i,"\n.el-pagination {\n  text-align: right;\n}\n.grid-content {\n  min-height: 36px;\n}\n.el-input, .el-select {\n  width: 230px;\n}\n.width50 {\n  width: 48%;\n}\n.width100 {\n  width: 100%;\n}\n.width100 .el-form-item__content {\n    width: 77.5%;\n}\n",""])},"Z+lZ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("OVQD"),s=r("vLgD");function i(e){return Object(s.a)({url:"/academy/grouplist",method:"get",params:e})}function o(e){return Object(s.a)({url:"/academy/professorlist",method:"get",params:e})}var n=r("t5DY"),l={props:["currentNode","type"],data:function(){return{serviceInfo:{class_id:this.currentNode.id,serviceName:"",serviceDescr:"",serviceType:this.currentNode.id,className:this.currentNode.name,url:"",in_arg:"",banner:"",serviceIcon:"",serviceState:"",ServiceInvocationMode:"",academyId:"",methodType:"",professorId:"",groupId:"",relates:[{relateType:"",title:"",banner:"",content:""}]},initServiceInfo:{class_id:this.currentNode.id,serviceName:"",serviceDescr:"",serviceType:this.currentNode.id,className:this.currentNode.name,url:"",in_arg:"",banner:"",serviceIcon:"",serviceState:"",academyId:"",methodType:"",professorId:"",groupId:"",relates:[{relateType:"",title:"",banner:"",content:""}]},serviceId:"",serviceTypeList:[],attrType:"",serviceDescr:"",academyList:[],academyGroupList:[],academyProfessorList:[],dictList:[],rules:{serviceName:[{required:!0,message:"请输入服务名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],className:[{required:!0,message:"请选择所属类型",trigger:"change"}],ServiceInvocationMode:[{required:!0,message:"请选择服务调用方式",trigger:"change"}],url:[{required:!0,message:"请选择服务调用路径",trigger:"change"}],in_arg:[{required:!0,message:"请输入输入参数",trigger:"change"}],serviceState:[{required:!0,message:"请输入服务状态",trigger:"change"}],academyId:[{required:!0,message:"请输入所属学校",trigger:"change"}],professorId:[{required:!0,message:"请输入所有者",trigger:"change"}]}}},methods:{removeRelate:function(e){var t=this.serviceInfo.relates.indexOf(e);-1!==t&&this.serviceInfo.relates.splice(t,1)},addRelate:function(){this.serviceInfo.relates.push({relateType:"",title:"",banner:"",content:""})},returnBack:function(){this.$emit("returnBack")},addServerInfo:function(){console.log("==============添加/编辑接入信息================"),this.$emit("dialogMethod",!0)},submitForm:function(e){var t=this;console.log("+++++++++++++++++++保存服务信息+++++++++++++++++++++"),console.log(this.currentNode),console.log(this.serviceInfo),console.log(this.$store.state.service.serviceId),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r;1==t.type?(t.serviceInfo.id=t.$store.state.service.serviceId,(r=t.serviceInfo,Object(s.a)({url:"classify/updateService",method:"post",data:r})).then(function(e){console.log(t.$store.state),t.$emit("reloadingTable"),t.$message({message:"保存服务信息成功！",type:"success"}),t.returnBack()})):function(e){return Object(s.a)({url:"classify/addService",method:"post",data:e})}(t.serviceInfo).then(function(e){t.serviceId=e.data.id,t.$store.dispatch("SetServiceId",t.serviceId),console.log(t.$store.state),t.$emit("reloadingTable"),t.$confirm("服务创建成功，是否维护接入信息","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"info"}).then(function(){t.addServerInfo()}).catch(function(){t.returnBack()})})})},changeAcademy:function(e){var t=this;i({id:e}).then(function(e){t.serviceInfo.groupId="",t.academyGroupList=e.data}),o({academyId:e}).then(function(e){t.serviceInfo.professorId="",t.academyProfessorList=e.data})}},mounted:function(){var e,t=this;Object(s.a)({url:"/academy/list",method:"get",params:e}).then(function(e){t.academyList=e.data}),Object(n.a)().then(function(e){t.dictList=e.data}),console.log("为编辑状态  获取服务信息详情"),console.log(this.type),1==this.type?function(e){return Object(s.a)({url:"/classify/serviceDetail",method:"post",params:e})}({serviceId:this.$store.state.service.serviceId}).then(function(e){i({id:e.data.academyId}).then(function(e){t.academyGroupList=e.data}),o({academyId:e.data.academyId}).then(function(e){t.academyProfessorList=e.data}),e.data.groupId||(e.data.groupId=""),t.serviceInfo=e.data,console.log(t.serviceInfo)}):this.serviceInfo=this.initServiceInfo}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"grid-content addServicePanel"},[r("div",[r("a",{staticClass:"rebackLink",on:{click:e.returnBack}},[e._v("服务列表")]),e._v(" > \n       "),0==e.type?r("a",[e._v(" 添加服务")]):r("a",[e._v("编辑服务")])]),e._v(" "),r("br"),e._v(" "),r("el-row",[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right",inline:!0,"label-width":"140px",model:e.serviceInfo,rules:e.rules}},[r("el-form-item",{staticClass:"width50",attrs:{label:"服务名称：",prop:"serviceName"}},[r("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.serviceInfo.serviceName,callback:function(t){e.$set(e.serviceInfo,"serviceName",t)},expression:"serviceInfo.serviceName"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"所属类型：",prop:"className"}},[r("el-input",{attrs:{disabled:""},model:{value:e.serviceInfo.className,callback:function(t){e.$set(e.serviceInfo,"className",t)},expression:"serviceInfo.className"}})],1),e._v(" "),r("el-form-item",{staticClass:"width100",attrs:{label:"服务描述：",prop:"serviceDescr"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入服务描述"},model:{value:e.serviceInfo.serviceDescr,callback:function(t){e.$set(e.serviceInfo,"serviceDescr",t)},expression:"serviceInfo.serviceDescr"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"服务调用方式：",prop:"methodType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serviceInfo.ServiceInvocationMode,callback:function(t){e.$set(e.serviceInfo,"ServiceInvocationMode",t)},expression:"serviceInfo.ServiceInvocationMode"}},e._l(e.dictList,function(t){return"001"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"服务调用路径：",prop:"url"}},[r("el-input",{attrs:{placeholder:"请输入调用路径"},model:{value:e.serviceInfo.url,callback:function(t){e.$set(e.serviceInfo,"url",t)},expression:"serviceInfo.url"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"输入参数：",prop:"in_arg"}},[r("el-input",{attrs:{placeholder:"请输入输入参数"},model:{value:e.serviceInfo.in_arg,callback:function(t){e.$set(e.serviceInfo,"in_arg",t)},expression:"serviceInfo.in_arg"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"banner路径："}},[r("el-input",{attrs:{placeholder:"请输入服务调用路径"},model:{value:e.serviceInfo.banner,callback:function(t){e.$set(e.serviceInfo,"banner",t)},expression:"serviceInfo.banner"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"图片："}},[r("el-input",{attrs:{placeholder:"请输入服务调用路径"},model:{value:e.serviceInfo.serviceIcon,callback:function(t){e.$set(e.serviceInfo,"serviceIcon",t)},expression:"serviceInfo.serviceIcon"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"服务状态：",prop:"serviceState"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serviceInfo.serviceState,callback:function(t){e.$set(e.serviceInfo,"serviceState",t)},expression:"serviceInfo.serviceState"}},e._l(e.dictList,function(t){return"003"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"所属学校：",prop:"academyId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeAcademy},model:{value:e.serviceInfo.academyId,callback:function(t){e.$set(e.serviceInfo,"academyId",t)},expression:"serviceInfo.academyId"}},e._l(e.academyList,function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.academyName}})}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"所有者：",prop:"professorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serviceInfo.professorId,callback:function(t){e.$set(e.serviceInfo,"professorId",t)},expression:"serviceInfo.professorId"}},e._l(e.academyProfessorList,function(e){return r("el-option",{key:e.id,attrs:{label:e.professorName,value:e.id}})}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"课题组／研究方向：",prop:"groupId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serviceInfo.groupId,callback:function(t){e.$set(e.serviceInfo,"groupId",t)},expression:"serviceInfo.groupId"}},e._l(e.academyGroupList,function(e){return r("el-option",{key:e.groupId,attrs:{label:e.groupName,value:e.groupId}})}))],1),e._v(" "),r("h5",{staticClass:"customModeTitle text_center"},[e._v("自定义模式")]),e._v(" "),e._l(e.serviceInfo.relates,function(t,a){return r("div",{key:a,staticClass:"customMode"},[r("div",{staticClass:"left"},[r("el-form-item",{staticClass:"width50",attrs:{label:"类别"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.relateType,callback:function(r){e.$set(t,"relateType",r)},expression:"relate.relateType"}},e._l(e.dictList,function(t){return"006"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"名称"}},[r("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.title,callback:function(r){e.$set(t,"title",r)},expression:"relate.title"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"图标"}},[r("el-input",{attrs:{placeholder:"请输入图标"},model:{value:t.banner,callback:function(r){e.$set(t,"banner",r)},expression:"relate.banner"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"描述"}},[r("el-input",{attrs:{placeholder:"请输入描述"},model:{value:t.content,callback:function(r){e.$set(t,"content",r)},expression:"relate.content"}})],1)],1),e._v(" "),r("div",{staticClass:"right"},[r("a",{on:{click:function(r){e.removeRelate(t)}}},[r("i",{staticClass:"el-icon-close"})])])])}),e._v(" "),r("div",{staticClass:"text_center"},[r("el-button",{attrs:{size:"mini",round:""},on:{click:e.addRelate}},[e._v("添加+")])],1),e._v(" "),r("hr")],2)],1),e._v(" "),r("el-row",[1==e.type?r("el-button",{attrs:{type:"text"},on:{click:e.addServerInfo}},[e._v("编辑接入信息")]):e._e()],1),e._v(" "),r("el-row",{staticClass:"text_center"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.returnBack}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var d=r("/Xao")(l,c,!1,function(e){r("eMIr")},"data-v-7b2986f0",null).exports,u=r("HZZI"),v={props:["dialogFormVisible"],data:function(){var e=this;return{isVisible:this.dialogFormVisible,dialogTitle:"编辑接入信息",dictList:[],serviceId:"",serverInfo:{accessWay:"002001",accessType:"",accessState:"",accessModel:"",deployPath:"",visitURL:"",contactPerson:"",contactTel:"",accessPerson:"",accessId:this.serviceId,serverId:""},currentRow:null,defauleTableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],tableData:[],rules:this.urlRules,defaultRules:{accessWay:[{required:!0,message:"请选择接入方式",trigger:"change"}],accessState:[{required:!0,message:"请选择接入状态",trigger:"change"}],serverId:[{required:!0,validator:function(t,r,a){console.log("++++++++++++++++++当前选中的服务器信息++++++++++++++++++++++++++"),console.log(e.currentRow),null==e.currentRow?a(new Error("请选择服务器")):a()},trigger:"change"}],accessType:[{required:!0,message:"请选择项目类型",trigger:"change"}],accessModel:[{required:!0,message:"请选择开发模式",trigger:"change"}],deployPath:[{required:!0,message:"请输入部署目录",trigger:"blur"}],contactPerson:[{required:!0,message:"请选择联系人",trigger:"change"}],contactTel:[{required:!0,message:"请输入联系人电话",trigger:"blur"}],accessPerson:[{required:!0,message:"请输入泰岳对接人",trigger:"blur"}]},urlRules:{accessWay:[{required:!0,message:"请选择接入方式",trigger:"change"}],accessState:[{required:!0,message:"请选择接入状态",trigger:"change"}],accessModel:[{required:!0,message:"请选择开发模式",trigger:"change"}],accessType:[{required:!0,message:"请选择项目类型",trigger:"change"}],visitURL:[{required:!0,message:"请输入访问地址",trigger:"blur"}],contactPerson:[{required:!0,message:"请选择联系人",trigger:"change"}],contactTel:[{required:!0,message:"请输入联系人电话",trigger:"blur"}],accessPerson:[{required:!0,message:"请输入泰岳对接人",trigger:"blur"}]}}},watch:{dialogFormVisible:function(e){var t,r=this;console.log("监听dialogFormVisible："+e),this.isVisible=e,e&&((t={serviceId:this.$store.state.service.serviceId},Object(s.a)({url:"entry/serviceEntryInfo",method:"post",params:t})).then(function(e){null!=e.data&&(r.serverInfo=e.data)}),Object(u.c)().then(function(e){r.defauleTableData=e.data}))},isVisible:function(e){this.$emit("dialogMethod",e)}},methods:{changeAccessWay:function(e){"002002"==e?(this.rules=this.defaultRules,this.tableData=this.defauleTableData):(this.rules=this.urlRules,this.tableData=[]),this.$refs.ruleForm.resetFields(),this.serverInfo.accessWay=e},closeDialog:function(e){this.isVisible=!1},handleCurrentChange:function(e){console.log("+++++++++++++++++++当前选中表格的行数据+++++++++++++++++++++++"),console.log(e),this.currentRow=e,this.serverInfo.serverId=e.id},submitForm:function(e){var t=this;console.log("+++++++++++++++++++保存接入信息+++++++++++++++++++++"),console.log(this.$store.state.service.serviceId),console.log(this.$store.state.service.isEditMode),this.serverInfo.accessId=this.$store.state.service.serviceId,console.log(this.serverInfo),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r;t.$store.state.service.isEditMode?(r=t.serverInfo,Object(s.a)({url:"entry/update/serviceEntry",method:"post",params:r})).then(function(e){t.$message({message:"保存接入信息成功！",type:"success"}),t.closeDialog(),t.$emit("returnBack")}):function(e){return Object(s.a)({url:"entry/ServiceEntry/add",method:"post",params:e})}(t.serverInfo).then(function(e){t.$message({message:"保存接入信息成功！",type:"success"}),t.closeDialog(),t.$emit("returnBack")})})}},mounted:function(){var e=this;this.rules=this.urlRules,console.log(this.dialogFormVisible),Object(n.a)().then(function(t){e.dictList=t.data})}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.isVisible,width:"75%"},on:{"update:visible":function(t){e.isVisible=t}}},[r("el-row",[r("el-form",{ref:"ruleForm",attrs:{"label-position":"right",inline:!0,"label-width":"140px",model:e.serverInfo,rules:e.rules}},[r("el-form-item",{staticClass:"width50",attrs:{label:"接入方式：",prop:"accessWay"}},[r("el-radio-group",{on:{change:e.changeAccessWay},model:{value:e.serverInfo.accessWay,callback:function(t){e.$set(e.serverInfo,"accessWay",t)},expression:"serverInfo.accessWay"}},e._l(e.dictList,function(t){return"002"==t.parentCode?r("el-radio",{key:t.dictCode,attrs:{label:t.dictCode}},[e._v("\n                "+e._s(t.dictName)+"\n                ")]):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"接入状态：",prop:"accessState"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serverInfo.accessState,callback:function(t){e.$set(e.serverInfo,"accessState",t)},expression:"serverInfo.accessState"}},e._l(e.dictList,function(t){return"003"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"项目类型：",prop:"accessType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serverInfo.accessType,callback:function(t){e.$set(e.serverInfo,"accessType",t)},expression:"serverInfo.accessType"}},e._l(e.dictList,function(t){return"007"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"开发模式：",prop:"accessModel"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serverInfo.accessModel,callback:function(t){e.$set(e.serverInfo,"accessModel",t)},expression:"serverInfo.accessModel"}},e._l(e.dictList,function(t){return"008"==t.parentCode?r("el-option",{key:t.dictCode,attrs:{label:t.dictName,value:t.dictCode}}):e._e()}))],1),e._v(" "),r("el-form-item",{staticClass:"width100",attrs:{label:"服务器信息：",prop:"serverId"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"",border:"",height:"250"},on:{"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"innerIp",label:"innerIp",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"innerPort",label:"innerPort",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"limiteTime",label:"limiteTime",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"natAccount",label:"natAccount",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"outerIP",label:"outerIP",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"outerPort",label:"outerPort",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"strategyNo",label:"strategyNo",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"REVERSE",label:"REVERSE",width:"180"}})],1)],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"部署目录：",prop:"deployPath"}},[r("el-input",{attrs:{placeholder:"请输入部署目录",disabled:!("002002"==e.serverInfo.accessWay)},model:{value:e.serverInfo.deployPath,callback:function(t){e.$set(e.serverInfo,"deployPath",t)},expression:"serverInfo.deployPath"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"访问地址：",prop:"visitURL"}},[r("el-input",{attrs:{disabled:"002002"==e.serverInfo.accessWay,placeholder:"请输入访问地址"},model:{value:e.serverInfo.visitURL,callback:function(t){e.$set(e.serverInfo,"visitURL",t)},expression:"serverInfo.visitURL"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"联系人：",prop:"contactPerson"}},[r("el-input",{attrs:{placeholder:"请选择联系人"},model:{value:e.serverInfo.contactPerson,callback:function(t){e.$set(e.serverInfo,"contactPerson",t)},expression:"serverInfo.contactPerson"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"联系人电话：",prop:"contactTel"}},[r("el-input",{attrs:{placeholder:"请输入联系人电话"},model:{value:e.serverInfo.contactTel,callback:function(t){e.$set(e.serverInfo,"contactTel",t)},expression:"serverInfo.contactTel"}})],1),e._v(" "),r("el-form-item",{staticClass:"width50",attrs:{label:"泰岳对接人：",prop:"accessPerson"}},[r("el-input",{attrs:{placeholder:"请输入泰岳对接人"},model:{value:e.serverInfo.accessPerson,callback:function(t){e.$set(e.serverInfo,"accessPerson",t)},expression:"serverInfo.accessPerson"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]},f=r("/Xao")(v,p,!1,null,null,null).exports,m=(r("9rMa"),{computed:{},data:function(){return{dialogFormVisible:!1,addPanel:!1,loading:!1,currentPage:1,totalNumber:null,pageSize:5,tableData:[],searchKeyWord:"",props:{label:"name",children:"zones"},type:0,count:1,treeData:[],currentNodeId:0,nodeInfo:null,isLastClassify:!1,serviceId:""}},components:{AddServicePanel:d,AddServerInfo:f},methods:{stringFormatter:function(e,t){return e.serviceDescr.length<=30?e.serviceDescr:""!=e.serviceDescr?e.serviceDescr.substring(0,30)+"...":""},querySearch:function(){console.log("====================查询====================="),console.log(this.searchKeyWord),this.refreshLoadingData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.refreshLoadingData()},handleCurrentChange:function(e){console.log("当前页: "+e),console.log("当前页: "+this.currentPage),this.currentPage=e,this.refreshLoadingData()},handleClick:function(e){},deleteRowData:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r;(r={id:e.id},Object(s.a)({url:"/classify/delService",method:"post",params:r})).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.refreshLoadingData(t.currentNodeId)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleNodeClick:function(e,t){this.nodeInfo=e,this.currentNodeId=e.id,this.currentPage=1,this.totalNumber=0,this.tableData=[],this.addPanel=!1,this.refreshLoadingData()},refreshLoadingData:function(e){var t=this;this.loading=!0,Object(a.e)({id:this.currentNodeId,pageSize:this.pageSize,pageNow:this.currentPage,keyword:this.searchKeyWord}).then(function(e){t.tableData=e.data.result,t.isLastClassify=e.data.isLastClassify,t.totalNumber=e.total,t.loading=!1})},reloadingTable:function(){console.log("++++++++++++++++添加服务，返回，调用刷新列表+++++++++++++++++++"),this.refreshLoadingData()},loadNode:function(e,t){var r=void 0;r=0===e.level?{id:0}:{id:e.data.id},Object(a.d)(r).then(function(e){return t(e.data)})},addOrEditService:function(e,t){this.isLastClassify?(this.type=e,1==e?(this.$store.dispatch("SetIsEditMode",!0),this.$store.dispatch("SetServiceId",t.id)):this.$store.dispatch("SetIsEditMode",!1),this.addPanel=!0):this.$message({message:"请选择最后一层类",type:"warning"})},returnBack:function(){this.addPanel=!1},dialogMethod:function(e){console.log("===========服务器编辑信息 返回方法==============="),console.log(e),this.dialogFormVisible=e}},mounted:function(){}}),h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content"},[r("el-tree",{ref:"tree",attrs:{"node-key":"id",props:e.props,load:e.loadNode,lazy:"","highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),r("el-col",{attrs:{span:19}},[e.addPanel?e._e():r("div",{staticClass:"grid-content"},[r("el-input",{attrs:{placeholder:"请输入关键字","suffix-icon":"el-icon-search"},on:{change:e.querySearch},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addOrEditService(0)}}},[e._v("添加服务")]),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"index",label:"序号",type:"index",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"serviceName",label:"服务名称","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"serviceDescr",label:"描述",width:"250",formatter:e.stringFormatter}}),e._v(" "),r("el-table-column",{attrs:{prop:"url",label:"服务调用路径","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"in_arg",label:"输入参数","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"banner",label:"banner路径","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"academyName",label:"所属学校","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"professorName",label:"所有者","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"serviceState",label:"服务状态","min-width":"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rel_time",label:"发布时间","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.deleteRowData(t.row)}}},[e._v("删除")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.addOrEditService(1,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),r("br"),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.addPanel?r("add-service-panel",{attrs:{type:e.type,"current-node":e.nodeInfo},on:{returnBack:e.returnBack,reloadingTable:e.reloadingTable,dialogMethod:e.dialogMethod}}):e._e()],1),e._v(" "),r("add-server-info",{attrs:{"dialog-form-visible":e.dialogFormVisible},on:{returnBack:e.returnBack,dialogMethod:e.dialogMethod}})],1)},staticRenderFns:[]};var g=r("/Xao")(m,h,!1,function(e){r("FiPm")},null,null);t.default=g.exports},a7PV:function(e,t,r){(e.exports=r("BkJT")(!1)).push([e.i,"\n.rebackLink[data-v-7b2986f0]:hover {\n  text-decoration: underline;\n  color: #6257eb;\n}\n.text_center[data-v-7b2986f0] {\n  text-align: center;\n}\n.customMode[data-v-7b2986f0] {\n  background-color: #dedef370;\n  position: relative;\n  padding: 20px 0 0;\n  margin-bottom: 20px;\n}\n.customMode .right[data-v-7b2986f0] {\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n.customModeTitle[data-v-7b2986f0] {\n  color: #555050;\n  position: relative;\n}\n.customModeTitle[data-v-7b2986f0]:before {\n    left: 0;\n}\n.customModeTitle[data-v-7b2986f0]:after, .customModeTitle[data-v-7b2986f0]:before {\n    content: '';\n    position: absolute;\n    top: 52%;\n    background: #d9d9d9;\n    width: 43%;\n    height: 2px;\n}\n.customModeTitle[data-v-7b2986f0]:after {\n    right: 0;\n}\n",""])},eMIr:function(e,t,r){var a=r("a7PV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("4bdc1377",a,!0)},t5DY:function(e,t,r){"use strict";t.a=function(e){return Object(a.a)({url:"/dict/list",method:"get",params:e})};var a=r("vLgD")}});