webpackJsonp([3],{LDce:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.el-pagination {\n  text-align: right;\n}\n.grid-content {\n  min-height: 36px;\n}\n.el-input, .el-select {\n  width: 230px;\n}\n.width50 {\n  width: 48%;\n}\n.width100 {\n  width: 100%;\n}\n.width100 .el-form-item__content {\n    width: 77.5%;\n}\n.collapseDiv {\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 450px;\n}\n.collapseDiv ul.ul-item {\n    list-style: none;\n    padding: 0px;\n}\n.collapseDiv ul.ul-item li {\n      padding: 10px 5px;\n      margin-left: 20px;\n      border-left: 3px solid #fff;\n}\n.collapseDiv ul.ul-item li.active, .collapseDiv ul.ul-item li:hover {\n        border-left: 3px solid #409eff;\n        background-color: #409eff3b;\n}\n.collapseDiv ul.ul-item li:not(:last-child) {\n        border-bottom: 1px solid #e3dfdf;\n}\n.collapseDiv .el-collapse-item.active .el-collapse-item__header {\n    background-color: #409eff;\n    color: #fff;\n}\n.collapseDiv .el-collapse-item:hover {\n    background-color: #409eff3b;\n}\n",""])},OpGB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("p512"),o=a("t5DY"),s={data:function(){return{activeNames:"",loading:!1,currentPage:1,totalNumber:null,pageSize:5,tableData:[],searchKeyWord:"",schoolsList:[],academyId:"",currentNodeId:"",currentNode:"",dialogFormVisible:!1,form:{},formData:{},dialogTitle:"",edieMode:!1,isProfessor:!1,dictList:[]}},methods:{parseSex:function(e){if(!e.professorSex)return"";for(var t=0;t<this.dictList.length;t++)if(this.dictList[t].dictCode==e.professorSex)return this.dictList[t].dictName},handleChange:function(e){var t=this;if(console.log("===========点击学校，加载学院================="),console.log(e),""==e)return!1;this.tableData=[],this.currentPage=1,this.totalNumber=0,this.currentNodeId=e,this.academyId=e.substring(1);for(var a=function(e){if(t.schoolsList[e].id==t.academyId&&!t.schoolsList[e].children)return Object(i.g)({id:t.academyId}).then(function(a){t.$set(t.schoolsList[e],"children",[]),t.schoolsList[e].children=a.data}),"break"},o=0;o<this.schoolsList.length;o++){if("break"===a(o))break}},triggerReloadingTable:function(e){this.currentNodeId=e.groupId,this.currentNode=e,this.currentPage=1,this.totalNumber=0,this.refreshLoadingData()},querySearch:function(){console.log("====================查询====================="),console.log(this.searchKeyWord),this.refreshLoadingData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.refreshLoadingData()},handleCurrentChange:function(e){console.log("当前页: "+e),console.log("当前页: "+this.currentPage),this.currentPage=e,this.refreshLoadingData()},refreshLoadingData:function(e){var t=this;this.loading=!0,Object(i.h)({groupId:this.currentNodeId,pageSize:this.pageSize,pageNow:this.currentPage,keyword:this.searchKeyWord}).then(function(e){t.tableData=e.data,t.totalNumber=e.total,t.loading=!1})},addGroup:function(){this.isProfessor=!1,this.currentNodeId=0,this.edieMode=!1;var e,t;e=[{name:"部门名称",prop:"groupName",rules:{required:!0,message:"部门名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"部门描述",prop:"grouDesc",labelWidth:"180px",isInput:!1,isTextarea:!0}],t={academyId:this.academyId,groupName:"",grouDesc:""},this.form=t,this.formData=e,this.dialogTitle="添加部门",this.dialogFormVisible=!0},addClick:function(){this.isProfessor=!1,console.log("左侧添加按钮 添加机构/部门"),console.log(this.currentNodeId),this.edieMode=!1;var e={},t={};-1==(this.currentNodeId+"").indexOf("s")?(e=[{name:"部门名称",prop:"groupName",rules:{required:!0,message:"部门名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"部门描述",prop:"grouDesc",labelWidth:"180px",isInput:!1,isTextarea:!0}],t={academyId:this.academyId,groupName:"",grouDesc:""},this.dialogTitle="添加部门"):(e=[{name:"机构名称",prop:"academyName",rules:{required:!0,message:"机构名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"机构描述",prop:"academyDesc",labelWidth:"180px",isInput:!1,isTextarea:!0},{name:"访问路径",prop:"academyURL",labelWidth:"180px",isInput:!0,isTextarea:!1}],t={academyName:"",academyDesc:"",academyURL:""},this.dialogTitle="添加机构"),this.form=t,this.formData=e,this.dialogFormVisible=!0},editClick:function(){this.isProfessor=!1,console.log("左侧编辑按钮  编辑机构、部门"),console.log(this.currentNodeId),this.edieMode=!0;var e={},t={};if(-1==(this.currentNodeId+"").indexOf("s"))e=[{name:"部门名称",prop:"groupName",rules:{required:!0,message:"部门名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"部门描述",prop:"groupDesc",labelWidth:"180px",isInput:!1,isTextarea:!0}],console.log(this.currentNode),(t=this.currentNode).id=this.currentNodeId,this.dialogTitle="编辑部门";else{e=[{name:"机构名称",prop:"academyName",rules:{required:!0,message:"机构名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"机构描述",prop:"academyDesc",labelWidth:"180px",isInput:!1,isTextarea:!0},{name:"访问路径",prop:"academyURL",labelWidth:"180px",isInput:!0,isTextarea:!1}];for(var a=0;a<this.schoolsList.length;a++)this.schoolsList[a].id==this.academyId&&(t=this.schoolsList[a]);this.dialogTitle="编辑机构"}this.form=t,this.formData=e,this.dialogFormVisible=!0},submitForm:function(e){var t=this;console.log(this.form),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(t.edieMode){if(t.isProfessor)return void Object(i.l)(t.form).then(function(e){t.currentPage=1,t.totalNumber=0,t.refreshLoadingData(),t.dialogFormVisible=!1,t.$message({message:"保存教授成功！",type:"success"})});console.log(t.currentNodeId),-1==(t.currentNodeId+"").indexOf("s")?Object(i.k)(t.form).then(function(e){t.init(),t.dialogFormVisible=!1,t.$message({message:"保存部门成功！",type:"success"})}):Object(i.j)(t.form).then(function(e){t.init(),t.dialogFormVisible=!1,t.$message({message:"保存机构成功！",type:"success"})})}else{if(t.isProfessor)return void Object(i.c)(t.form).then(function(e){t.currentPage=1,t.totalNumber=0,t.refreshLoadingData(),t.dialogFormVisible=!1,t.$message({message:"保存教授成功！",type:"success"})});console.log(t.currentNodeId),-1==(t.currentNodeId+"").indexOf("s")?Object(i.b)(t.form).then(function(e){t.init(),t.dialogFormVisible=!1,t.$message({message:"保存部门成功！",type:"success"})}):Object(i.a)(t.form).then(function(e){t.init(),t.dialogFormVisible=!1,t.$message({message:"保存机构成功！",type:"success"})})}})},deleteClick:function(){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){-1==(e.currentNodeId+"").indexOf("s")?Object(i.e)({id:e.currentNodeId}).then(function(t){e.init(),e.$message({type:"success",message:"删除成功!"})}):Object(i.d)({id:e.academyId}).then(function(t){e.init(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addOrUpdateProfessor:function(e,t){if(-1!=(this.currentNodeId+"").indexOf("s"))return!1;this.isProfessor=!0;this.formData=[{name:"教授名称",prop:"professorName",rules:{required:!0,message:"教授名称不能为空",trigger:"blur"},labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"研究主要方向",prop:"professorDesc",labelWidth:"180px",isInput:!1,isTextarea:!0},{name:"性别",prop:"professorSex",labelWidth:"180px",isInput:!1,isTextarea:!1,isSelect:!0,parentCode:"009"},{name:"职称",prop:"professorTitle",labelWidth:"180px",isInput:!0,isTextarea:!1}],0==e?(this.form={professorName:"",professorDesc:"",professorSex:"",professorTitle:"",academyId:this.academyId,groupId:this.currentNodeId},this.dialogTitle="添加教授",this.edieMode=!1):1==e&&(this.form=t,this.dialogTitle="编辑教授",this.edieMode=!0),this.dialogFormVisible=!0},deleteProfessor:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.f)({id:e.id}).then(function(e){t.refreshLoadingData(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},init:function(){var e=this;this.tableData=[],Object(i.i)().then(function(t){e.schoolsList=t.data,t.data[0]&&(""!=e.academyId?(e.activeNames="s"+e.academyId,e.handleChange("s"+e.academyId)):(e.activeNames="s"+t.data[0].id,e.handleChange("s"+t.data[0].id)))})}},mounted:function(){var e=this;this.init(),Object(o.a)().then(function(t){e.dictList=t.data})}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("div",{},[a("el-button",{attrs:{type:"text"},on:{click:e.addClick}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.editClick}},[a("i",{staticClass:"el-icon-edit"}),e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.deleteClick}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")])],1),e._v(" "),a("el-collapse",{staticClass:"collapseDiv",attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.schoolsList,function(t){return a("el-collapse-item",{key:t.id,staticClass:"collapseItem",class:e.currentNodeId=="s"+t.id?"active":"",attrs:{title:t.academyName,name:"s"+t.id}},[t.children&&0!=t.children.length?a("ul",{staticClass:"ul-item"},e._l(t.children,function(t){return a("li",{key:t.groupId,class:e.currentNodeId==t.groupId?"active":"",on:{click:function(a){e.triggerReloadingTable(t)}}},[a("a",[e._v(e._s(t.groupName))])])})):a("ul",{staticStyle:{"list-style":"none"}},[a("li",[a("el-button",{attrs:{type:"text"},on:{click:e.addGroup}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("新增部门")])],1)])])}))],1)]),e._v(" "),a("el-col",{attrs:{span:19}},[a("el-input",{attrs:{placeholder:"请输入关键字","suffix-icon":"el-icon-search"},on:{change:e.querySearch},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addOrUpdateProfessor(0)}}},[e._v("添加教授")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",type:"index",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"professorName",label:"教授名称","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"professorDesc",label:"研究主要方向",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"professorSex",label:"性别","min-width":"150",formatter:e.parseSex}}),e._v(" "),a("el-table-column",{attrs:{prop:"professorTitle",label:"职称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteProfessor(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.addOrUpdateProfessor(1,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form}},e._l(e.formData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.name+":","label-width":t.labelWidth,prop:t.prop,rules:t.rules}},[t.isInput?a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):e._e(),e._v(" "),t.isTextarea?a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},rows:2,"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):e._e(),e._v(" "),t.isSelect?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}},e._l(e.dictList,function(i){return i.parentCode==t.parentCode?a("el-option",{key:i.dictCode,attrs:{label:i.dictName,value:i.dictCode}}):e._e()})):e._e()],1)})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("/Xao")(s,r,!1,function(e){a("lK8h")},null,null);t.default=n.exports},lK8h:function(e,t,a){var i=a("LDce");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("8bSs")("e6ba4a7c",i,!0)},p512:function(e,t,a){"use strict";t.i=function(){return Object(i.a)({url:"/academy/list",method:"post"})},t.g=function(e){return Object(i.a)({url:"/academy/grouplist",method:"post",params:e})},t.h=function(e){return Object(i.a)({url:"/academy/professorlist",method:"post",params:e})},t.a=function(e){return Object(i.a)({url:"/academy/addAcademy",method:"post",params:e})},t.j=function(e){return Object(i.a)({url:"/academy/updateAcademy",method:"post",data:e})},t.d=function(e){return Object(i.a)({url:"/academy/delAcademy",method:"post",params:e})},t.b=function(e){return Object(i.a)({url:"/academy/addGroup",method:"post",params:e})},t.k=function(e){return Object(i.a)({url:"/academy/updateGroup",method:"post",data:e})},t.e=function(e){return Object(i.a)({url:"/academy/delGroup",method:"post",params:e})},t.c=function(e){return Object(i.a)({url:"/academy/addProfessor",method:"post",params:e})},t.l=function(e){return Object(i.a)({url:"/academy/updateProfessor",method:"post",data:e})},t.f=function(e){return Object(i.a)({url:"/academy/delProfessor",method:"post",params:e})};var i=a("vLgD")},t5DY:function(e,t,a){"use strict";t.a=function(e){return Object(i.a)({url:"/dict/list",method:"get",params:e})};var i=a("vLgD")}});