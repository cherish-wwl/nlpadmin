webpackJsonp([7],{"/e3A":function(e,t,a){var l=a("cbaM");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("8bSs")("67034f1d",l,!0)},cbaM:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.normal_ul[data-v-1f0dc073] {\n  list-style: none;\n  padding: 0;\n}\n.normal_ul li[data-v-1f0dc073] {\n    line-height: 30px;\n    padding-right: 10px;\n    font-size: 14px;\n    color: #606266;\n}\n.normal_ul li i[data-v-1f0dc073] {\n      color: #409eff;\n}\n.normal_ul li span.icon[data-v-1f0dc073] {\n      float: right;\n}\n.normal_ul li .content_li[data-v-1f0dc073] {\n      width: 120px;\n      height: 20px;\n      line-height: 20px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      display: inline-block;\n      vertical-align: middle;\n}\n.normal_ul li[data-v-1f0dc073]:hover, .normal_ul li.active[data-v-1f0dc073] {\n    background-color: #409eff;\n    color: #ffffff;\n}\n.normal_ul li:hover i[data-v-1f0dc073], .normal_ul li.active i[data-v-1f0dc073] {\n      color: #ffffff;\n}\nform.el-form[data-v-1f0dc073] {\n  padding-right: 120px;\n}\n",""])},n3ca:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vLgD");function i(){return Object(l.a)({url:"/dataset/attrlist",method:"get"})}function n(e){return Object(l.a)({url:"/dataset/dataTypelist",method:"get",params:e})}var r={data:function(){return{activeName:"trade",loading:!1,tradesTableData:null,currentPage:1,pageSize:5,totalNumber:null,currentLevelOneId:null,currentRadioId:null,leverOneData:[],levelTwoData:[],currentLevelTwoId:null,tableData:[],dialogFormVisible:!1,dialogTitle:"添加数据",form:{},formData:"",dataMode:"add",levelNum:"one",formLabelWidth:"120px"}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadingTable(this.currentLevelTwoId)},handleCurrentChange:function(e){console.log("当前页: "+e),console.log("当前页: "+this.currentPage),this.currentPage=e,this.loadingTable(this.currentLevelTwoId)},addRowData:function(){this.dialogFormVisible=!0,this.dialogTitle="添加数据";this.form={name:"",image:"",size:"",uploader:"",introduce:"",format:"",id:"",typeId:this.currentLevelTwoId,attr:this.currentLevelOneId,url:""},this.formData=[{name:"名称",prop:"name",rules:[{required:!0,message:"名称不能为空",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"图片",prop:"image",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"上传者",prop:"uploader",rules:[{required:!0,message:"上传者不能为空",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"大小",prop:"size",labelWidth:"180px",isNumber:!0,rules:[{required:!0,message:"请输入大小",pattern:/.+/,trigger:"blur"},{type:"number",message:"必须是数字"}],isInput:!0,isTextarea:!1},{name:"介绍",prop:"introduce",rules:[{required:!0,message:"介绍不能为空",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"格式",prop:"format",rules:[{required:!0,message:"格式不能为空",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"访问路径",prop:"url",rules:[{required:!0,message:"格式不能为空",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1}],this.levelNum="three",this.dataMode="add"},editRowData:function(e){console.log(e),this.dialogFormVisible=!0,this.dialogTitle="编辑数据";this.form=e,this.formData=[{name:"名称",prop:"name",rules:[{required:!0,message:"名称不能为空",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"图片",prop:"image",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"uploader",prop:"uploader",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"size",prop:"size",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"introduce",prop:"introduce",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"format",prop:"format",labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"url",prop:"url",labelWidth:"180px",isInput:!0,isTextarea:!1}],this.levelNum="three",this.dataMode="edit"},LevelOneClick:function(e){var t=this;"add"==e?(this.addClick("one"),this.currentRadioId=this.currentLevelOneId):(this.currentLevelOneId=this.currentRadioId,this.tableData=null,this.levelTwoData=null,this.currentPage=1,this.totalNumber=0,this.pageSize=5,n({id:this.currentLevelOneId}).then(function(e){t.levelTwoData=e.data,t.levelTwoData[0]&&(t.currentLevelTwoId=t.levelTwoData[0].id,t.loadingTable(t.currentLevelTwoId))}))},levelTwoClick:function(e){this.currentLevelTwoId=e.id,this.currentPage=1,this.loadingTable(this.currentLevelTwoId)},addClick:function(e){this.dialogFormVisible=!0,this.dialogTitle="添加",this.levelNum=e,this.dataMode="add";this.form={name:"",icon:""},this.formData=[{name:"名称",prop:"name",rules:[{required:!0,message:"名称不能为空",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"图标",prop:"icon",labelWidth:"180px",isInput:!0,isTextarea:!1}]},editClick:function(e,t){console.log(e),this.dialogFormVisible=!0,this.dialogTitle="编辑",this.levelNum=t,this.dataMode="edit";this.form=e,this.formData=[{name:"名称",prop:"name",rules:[{required:!0,message:"名称不能为空",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],labelWidth:"180px",isInput:!0,isTextarea:!1},{name:"图标",prop:"icon",labelWidth:"180px",isInput:!0,isTextarea:!1}]},deleteClick:function(e,t){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i;"one"==t?(i={id:e.id},Object(l.a)({url:"/dataset/attr/del",method:"post",params:i})).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.init()}):"two"==t?function(e){return Object(l.a)({url:"/dataset/attr/del",method:"post",params:e})}({id:e.id}).then(function(e){if(a.$message({type:"success",message:"删除成功!"}),a.loadingTwoLevel(a.currentLevelOneId),0==a.levelTwoData.length)return a.tableData=[],a.totalNumber=0,a.pageSize=5,void(a.currentPage=1);a.currentLevelTwoId=a.levelTwoData[0].id,a.loadingTable(a.currentLevelTwoId)}):"three"==t?function(e){return Object(l.a)({url:"/dataset/data/del",method:"post",params:e})}({id:e.id}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.currentPage=1,a.loadingTable(a.currentLevelTwoId)}):a.$message({type:"error",message:"未知错误"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},loadingOneLevel:function(){var e=this;i().then(function(t){console.log(t),e.leverOneData=t.data})},loadingTwoLevel:function(e){var t=this;n({id:e}).then(function(e){t.levelTwoData=e.data})},loadingTable:function(e){var t=this;this.loading=!0;var a,i={id:e,pageSize:this.pageSize,pageNow:this.currentPage};(a=i,Object(l.a)({url:"/dataset/datalist",method:"post",params:a})).then(function(e){t.tableData=e.data,t.totalNumber=e.total,t.loading=!1})},init:function(){var e=this;i().then(function(t){e.loading=!0,e.leverOneData=t.data,0!=e.leverOneData.length?(e.currentRadioId=e.leverOneData[0].id,e.currentLevelOneId=e.leverOneData[0].id,n({id:e.leverOneData[0].id}).then(function(t){if(e.levelTwoData=t.data,0==e.levelTwoData.length)return e.loading=!1,flase;e.currentLevelTwoId=e.levelTwoData[0].id,e.currentPage=1,e.loadingTable(e.levelTwoData[0].id)})):e.loading=!1})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a;"edit"==t.dataMode?"one"==t.levelNum?(console.log("一级编辑保存"),(a=t.form,Object(l.a)({url:"/dataset/updateAttr",method:"post",params:a})).then(function(e){t.loadingOneLevel(),t.$message({type:"success",message:"操作成功"})})):"two"==t.levelNum?(console.log("二级编辑保存"),function(e){return Object(l.a)({url:"/dataset/updateAttr",method:"post",params:e})}(t.form).then(function(e){t.loadingTwoLevel(t.currentLevelOneId),t.$message({type:"success",message:"操作成功"})})):"three"==t.levelNum?(console.log("三级编辑保存"),function(e){return Object(l.a)({url:"/dataset/updateData",method:"post",params:e})}(t.form).then(function(e){t.currentPage=1,t.loadingTable(t.currentLevelTwoId)})):t.$message({type:"error",message:"未知错误"}):"one"==t.levelNum?(console.log("一级添加保存"),function(e){return Object(l.a)({url:"/dataset/attr/add",method:"post",params:e})}({name:t.form.name,icon:t.form.icon,attr:0}).then(function(e){t.loadingOneLevel(),t.$message({type:"success",message:"操作成功"})})):"two"==t.levelNum?(console.log("二级添加保存"),function(e){return Object(l.a)({url:"/dataset/attr/add",method:"post",params:e})}({name:t.form.name,icon:t.form.icon,attr:t.currentLevelOneId}).then(function(e){t.loadingTwoLevel(t.currentLevelOneId),t.$message({type:"success",message:"操作成功"})})):"three"==t.levelNum?(console.log("三级添加保存"),function(e){return Object(l.a)({url:"/dataset/data/add",method:"post",params:e})}(t.form).then(function(e){t.currentPage=1,t.loadingTable(t.currentLevelTwoId),t.$message({type:"success",message:"操作成功"})})):t.$message({type:"error",message:"未知错误"}),t.dialogFormVisible=!1})}},mounted:function(){this.init()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},on:{change:e.LevelOneClick},model:{value:e.currentRadioId,callback:function(t){e.currentRadioId=t},expression:"currentRadioId"}},[e._l(e.leverOneData,function(t,l){return a("el-radio-button",{key:l,attrs:{label:t.id,title:t.name}},[e._v("\n      "+e._s(t.name)+"\n      "),a("span",{attrs:{title:"编辑"},on:{click:function(a){e.editClick(t,"one")}}},[e._v("  "),a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("span",{attrs:{title:"删除"},on:{click:function(a){e.deleteClick(t,"one")}}},[e._v("  "),a("i",{staticClass:"el-icon-delete"})])])}),e._v(" "),a("el-radio-button",{attrs:{label:"add",title:"添加"}},[a("span",[a("i",{staticClass:"el-icon-circle-plus-outline"})])])],2),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addClick("two")}}},[e._v("添加")]),e._v(" "),a("br"),e._v(" "),a("ul",{staticClass:"normal_ul"},e._l(e.levelTwoData,function(t,l){return a("li",{key:l,class:e.currentLevelTwoId==t.id?"active":"",on:{click:function(a){e.levelTwoClick(t)}}},[a("i",{staticClass:"el-icon-d-arrow-right"}),e._v(" "),a("div",{staticClass:"content_li",attrs:{title:t.name}},[e._v(" "+e._s(t.name)+" ")]),e._v(" "),a("span",{staticClass:"icon",attrs:{title:"删除"},on:{click:function(a){e.deleteClick(t,"two")}}},[e._v("  "),a("i",{staticClass:"el-icon-delete"})]),e._v(" "),a("span",{staticClass:"icon",attrs:{title:"编辑"},on:{click:function(a){e.editClick(t,"two")}}},[e._v("  "),a("i",{staticClass:"el-icon-edit"})])])}))],1)]),e._v(" "),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"grid-content"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRowData}},[e._v("添加")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"size",label:"大小","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploader",label:"上传者","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"introduce",label:"介绍","min-width":"500"}}),e._v(" "),a("el-table-column",{attrs:{prop:"format",label:"格式","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"访问路径","min-width":"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteClick(t.row,"three")}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editRowData(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form}},e._l(e.formData,function(t,l){return a("el-form-item",{key:l,attrs:{label:t.name+":","label-width":t.labelWidth,prop:t.prop,rules:t.rules}},[t.isNumber?a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,e._n(a))},expression:"form[item.prop]"}}):t.isInput?a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):t.isTextarea?a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},rows:2,"auto-complete":"off"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}}):t.isSelect?a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form[t.prop],callback:function(a){e.$set(e.form,t.prop,a)},expression:"form[item.prop]"}},e._l(e.dictList,function(l){return l.parentCode==t.parentCode?a("el-option",{key:l.dictCode,attrs:{label:l.dictName,value:l.dictCode}}):e._e()})):e._e()],1)})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("/Xao")(r,o,!1,function(e){a("/e3A")},"data-v-1f0dc073",null);t.default=s.exports}});